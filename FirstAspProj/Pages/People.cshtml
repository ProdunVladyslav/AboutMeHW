@page "/people"
@model PeopleModel
@{
    ViewData["Title"] = "People";
}

<h2 class="mt-4 mb-3">People</h2>

<div class="card shadow-sm">
    <div class="card-body p-0">
        <table class="table table-hover mb-0 align-middle">
            <thead class="table-light">
                <tr>
                    <th style="width:80px;">ID</th>
                    <th>Name</th>
                    <th>Profession</th>
                    <th style="width:160px;">Birth Date</th>
                    <th class="text-end" style="width:220px;">Actions</th>
                </tr>
            </thead>
            <tbody>
            @if (Model.People?.Any() == true)
            {
                foreach (var p in Model.People!)
                {
                    <tr>
                        <td>@p.Id</td>
                        <td>
                            <a asp-page="/Person" asp-route-id="@p.Id" class="text-decoration-none">
                                @p.FirstName @p.LastName
                            </a>
                        </td>
                        <td>@p.Profession</td>
                        <td>@p.BirthDate.ToString("yyyy-MM-dd")</td>
                        <td class="text-end">
                            <a asp-page="/PersonSkills" asp-route-id="@p.Id" class="btn btn-sm btn-info me-2">
                                Skills
                            </a>

                            <a asp-page="/EditPerson" asp-route-id="@p.Id" class="btn btn-sm btn-primary me-2">
                                Update
                            </a>

                            <form method="post" class="d-inline" asp-page-handler="Delete" asp-route-id="@p.Id">
                                <button type="submit" class="btn btn-sm btn-outline-danger"
                                        onclick="return confirm('Delete @p.FirstName @p.LastName?');">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="5" class="text-center py-4 text-muted">No people yet.</td>
                </tr>
            }
            </tbody>
        </table>
    </div>
</div>

<div class="mt-3 d-flex justify-content-end">
    <a asp-page="/UpsertPerson" class="btn btn-success">Add New</a>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<style>
    body { background:#f8fafc; }
    .card { border-radius: 12px; overflow: hidden; }
    .table thead th { font-weight:600; }
    .btn { border-radius: 8px; }

    .person-link {
        color: inherit;
        text-decoration: none; 
    }

    .person-link:hover {
        text-decoration: underline;
    }
</style>
